----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\m.callaghan\Documents\Github\panel_methods_slides\assignment\stata\stern_assignment.log
  log type:  text
 opened on:  22 Oct 2015, 12:19:07

. 
. /*load the data (delimiters can be either tab or space or a combination,
> collapse tells stata to treat a combination of delimiters as one delimiter 
> */
. import delimited ../data/stern2.dat, delimiters("\t ",collapse)
(8 vars, 2294 obs)

. 
. *summarise the data
. sum

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        year |      2,294        1975    8.946222       1960       1990
     country |      2,294    90.68919    38.53706          1        147
         pop |      2,294    47466.11    130444.3        231    1133683
          so |      2,294    703.0267    1991.168        .01   14213.89
      gdpppp |      2,294    5359.908    6244.168        303   80830.76
-------------+---------------------------------------------------------
        sopc |      2,294    .0215023    .0366821   8.90e-07   .4655517
          oe |      2,294    1689.189    462.9264       1000       2000
          v8 |          0

. 
. *histogram gdp and sopc (do we need to transform them
. hist gdpppp
(bin=33, start=303, width=2440.2351)

. hist sopc
(bin=33, start=8.900e-07, width=.0141076)

. 
. *create new transformed variables and squared term
. cap gen lgdp = log(gdpppp)

. cap gen lsopc = log(sopc)

. cap gen lgdpsq = lgdp*lgdp

. 
. *inspect the distribution of the new variables
. hist lgdp
(bin=33, start=5.7137327, width=.16928424)

. hist gdpppp
(bin=33, start=303, width=2440.2351)

. 
. *plot lgdp and lsopc
. twoway (scatter lsopc lgdp)

. 
. *regress using pooled ols
. reg lsopc lgdp lgdpsq

      Source |       SS           df       MS      Number of obs   =     2,294
-------------+----------------------------------   F(2, 2291)      =    679.91
       Model |  3019.46587         2  1509.73294   Prob > F        =    0.0000
    Residual |  5087.10815     2,291  2.22047497   R-squared       =    0.3725
-------------+----------------------------------   Adj R-squared   =    0.3719
       Total |  8106.57402     2,293  3.53535718   Root MSE        =    1.4901

------------------------------------------------------------------------------
       lsopc |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        lgdp |    1.82093   .4380234     4.16   0.000     .9619664    2.679894
      lgdpsq |  -.0417549   .0271007    -1.54   0.124    -.0948993    .0113895
       _cons |  -17.02817   1.752482    -9.72   0.000    -20.46478   -13.59155
------------------------------------------------------------------------------

. *graphical inspection for heteroscedasticity
. rvfplot

. *labeling countries might show if country effects are driving het
. rvfplot, yline(0) mlabel(country)

. *do a Breusch-Pagan test for heteroscedasticity
. estat hettest

Breusch-Pagan / Cook-Weisberg test for heteroskedasticity 
         Ho: Constant variance
         Variables: fitted values of lsopc

         chi2(1)      =   303.50
         Prob > chi2  =   0.0000

. 
. *set up panel
. xtset country year
       panel variable:  country (strongly balanced)
        time variable:  year, 1960 to 1990
                delta:  1 unit

. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. capture log close
